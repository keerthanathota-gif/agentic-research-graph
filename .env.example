# Agentic Research Knowledge Graph - Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# API Keys
# ============================================================================

# Anthropic API Key (required)
# Get your key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Optional: Additional API keys for embeddings, etc.
VOYAGE_API_KEY=your_voyage_api_key_here

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL connection
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=research_kg
DATABASE_USER=postgres
DATABASE_PASSWORD=your_secure_password_here

# Connection pool settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ============================================================================
# Redis Configuration
# ============================================================================

# Redis for caching and task queue
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ============================================================================
# Model Configuration
# ============================================================================

# Claude model selection
# Options: haiku, sonnet, opus
DEFAULT_MODEL=sonnet

# Agent-specific model overrides
PARSING_MODEL=haiku
CONCEPT_EXTRACTION_MODEL=sonnet
METHOD_EXTRACTION_MODEL=sonnet
RELATIONSHIP_EXTRACTION_MODEL=sonnet
ENTITY_LINKING_MODEL=sonnet
QUALITY_CONTROL_MODEL=haiku

# Model parameters
MAX_TOKENS=8192
TEMPERATURE=0.2

# ============================================================================
# Processing Configuration
# ============================================================================

# Parallel processing
MAX_CONCURRENT_PAPERS=8
MAX_RETRIES=3
RETRY_BACKOFF_MS=1000

# Timeouts (milliseconds)
API_TIMEOUT_MS=60000
DATABASE_TIMEOUT_MS=10000

# ============================================================================
# Corpus Selection
# ============================================================================

# Seed paper for corpus
SEED_PAPER_ARXIV_ID=2308.04079

# Corpus expansion settings
MAX_CORPUS_SIZE=100
CORPUS_DEPTH=2
CORPUS_STRATEGY=citation_bfs  # Options: citation_bfs, citation_dfs, semantic_similarity

# ============================================================================
# Quality Control
# ============================================================================

# Confidence thresholds
MIN_ENTITY_CONFIDENCE=0.5
MIN_RELATIONSHIP_CONFIDENCE=0.5
AUTO_ACCEPT_THRESHOLD=0.9

# Completeness requirements
REQUIRE_MAIN_METHOD=true
REQUIRE_EVALUATION=true

# ============================================================================
# Logging & Monitoring
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
LOG_FORMAT=json  # Options: json, text

# OpenTelemetry (optional)
OTEL_ENABLED=false
OTEL_ENDPOINT=http://localhost:4318

# Prometheus metrics (optional)
METRICS_ENABLED=false
METRICS_PORT=9090

# ============================================================================
# Application Settings
# ============================================================================

# Environment
ENVIRONMENT=development  # Options: development, staging, production

# API server
API_HOST=0.0.0.0
API_PORT=3000

# Feature flags
ENABLE_EMBEDDINGS=true
ENABLE_REAL_TIME_INGESTION=false
ENABLE_HUMAN_IN_THE_LOOP=true

# ============================================================================
# Storage
# ============================================================================

# Path for storing PDFs
PDF_STORAGE_PATH=./data/pdfs

# Path for checkpoints
CHECKPOINT_PATH=./data/checkpoints

# ============================================================================
# Rate Limiting
# ============================================================================

# Anthropic API rate limits
ANTHROPIC_REQUESTS_PER_MINUTE=50
ANTHROPIC_TOKENS_PER_MINUTE=100000

# arXiv API rate limits
ARXIV_REQUESTS_PER_SECOND=0.33

# ============================================================================
# Development / Testing
# ============================================================================

# Skip actual API calls (for testing)
DRY_RUN=false

# Use cached responses
USE_CACHE=true
CACHE_TTL_SECONDS=3600

# Debug mode
DEBUG=false
